Sim! Com simpleParser, fica muito mais fÃ¡cil. VocÃª pega o e-mail completo com source: true e o simpleParser extrai tudo pra vocÃª: texto, HTML, anexos, remetente, assunto, etc.

âœ… Exemplo simples com simpleParser:
ts
Copy
Edit
import { simpleParser } from 'mailparser';

const message = await this.client.fetchOne(id, { source: true }, { uid: true });

if (message?.source) {
  const parsed = await simpleParser(message.source);

  const email: Email = {
    id,
    subject: parsed.subject || '(Sem assunto)',
    from: parsed.from?.text || '(Remetente desconhecido)',
    date: parsed.date || new Date(),
    body: {
      text: parsed.text || '',
      html: parsed.html || ''
    }
  };

  return email;
}
ğŸ“¦ InstalaÃ§Ã£o:
bash
Copy
Edit
npm install mailparser
Com isso, vocÃª pode remover todos os fetchOne com bodyPart â€” o simpleParser faz tudo por trÃ¡s dos panos.

Quer que eu envie a versÃ£o atualizada da sua funÃ§Ã£o getEmailContent com isso aplicado?








